if ! [ -f ${XNAT_HOME}/config/xnat-conf.properties ]; then
  echo "${XNAT_HOME}/config/xnat-conf.properties configuration file create"

  cat >${XNAT_HOME}/config/xnat-conf.properties <<EOT
#
# xnat-conf.properties
# XNAT http://www.xnat.org
# Copyright (c) 2016, Washington University School of Medicine
# All Rights Reserved
#
# Released under the Simplified BSD.
#
datasource.driver=org.postgresql.Driver
datasource.url=jdbc:postgresql://${POSTGRES_HOST:-localhost}/${POSTGRES_DB:-xnat}
datasource.username=${POSTGRES_USER:-xnat}
datasource.password=${POSTGRES_PASSWORD:-xnat}

hibernate.dialect=org.hibernate.dialect.PostgreSQL9Dialect
hibernate.hbm2ddl.auto=update
hibernate.show_sql=false
hibernate.cache.use_second_level_cache=true
hibernate.cache.use_query_cache=true
EOT
fi
